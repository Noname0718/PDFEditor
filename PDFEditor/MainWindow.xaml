<Window x:Class="PDFEditor.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="PDF Editor"
        Height="800"
        Width="1200"
        FontFamily="Segoe UI"
        FontSize="12"
        Background="{StaticResource AppBackgroundGradientBrush}">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- ìƒë‹¨ íˆ´ë°” -->
        <Border Grid.Row="0"
                Background="{StaticResource CardBackgroundBrush}"
                BorderBrush="{StaticResource BorderBrushLight}"
                BorderThickness="0,0,0,1"
                Padding="20,12">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- íŒŒì¼ ê·¸ë£¹ -->
                <StackPanel Grid.Column="0"
                            Margin="0,0,20,0">
                    <TextBlock Text="íŒŒì¼"
                               Style="{StaticResource SectionLabelTextStyle}"/>
                    <Menu Background="Transparent"
                          BorderThickness="0"
                          VerticalAlignment="Center">
                        <MenuItem Header="ðŸ“ íŒŒì¼"
                                  FontWeight="SemiBold">
                            <MenuItem Header="ðŸ“‚ ì—´ê¸° (Ctrl+O)"
                                      Click="OpenPdf_Click"/>
                            <MenuItem Header="ðŸ’¾ ì €ìž¥ (Ctrl+S)"
                                      Click="SaveAnnotation_Click"/>
                            <MenuItem Header="ðŸ“ ìž‘ì—… ë¶ˆëŸ¬ì˜¤ê¸°"
                                      Click="LoadAnnotation_Click"/>
                            <Separator/>
                            <MenuItem Header="ðŸ“¤ PDF ë‚´ë³´ë‚´ê¸°"
                                      Click="ExportAnnotatedPdf_Click"/>
                        </MenuItem>
                    </Menu>
                </StackPanel>

                <!-- ë„êµ¬ ê·¸ë£¹ -->
                <StackPanel Grid.Column="1"
                            HorizontalAlignment="Center"
                            Margin="0,0,20,0">
                    <TextBlock Text="ê·¸ë¦¬ê¸° ë„êµ¬"
                               Style="{StaticResource SectionLabelTextStyle}"
                               HorizontalAlignment="Center"/>
                    <WrapPanel HorizontalAlignment="Center"
                               VerticalAlignment="Center">
                        <ToggleButton x:Name="SelectButton"
                                      Content="ðŸ–± ì„ íƒ"
                                      Style="{StaticResource ToolToggleButtonStyle}"
                                      Click="ToolButton_Click"
                                      Tag="Select"/>
                        <ToggleButton x:Name="PenButton"
                                      Content="âœ íŽœ"
                                      Style="{StaticResource ToolToggleButtonStyle}"
                                      IsChecked="True"
                                      Click="ToolButton_Click"
                                      Tag="Pen"/>
                        <ToggleButton x:Name="HighlighterButton"
                                      Content="ðŸ– í˜•ê´‘íŽœ"
                                      Style="{StaticResource ToolToggleButtonStyle}"
                                      Click="ToolButton_Click"
                                      Tag="Highlighter"/>
                        <ToggleButton x:Name="EraserButton"
                                      Content="ðŸ§½ ì§€ìš°ê°œ"
                                      Style="{StaticResource ToolToggleButtonStyle}"
                                      Click="ToolButton_Click"
                                      Tag="Eraser"/>
                        <ToggleButton x:Name="LineButton"
                                      Content="â†” ì§ì„ "
                                      Style="{StaticResource ToolToggleButtonStyle}"
                                      Click="ToolButton_Click"
                                      Tag="Line"/>
                        <ToggleButton x:Name="RectButton"
                                      Content="â¬› ì‚¬ê°í˜•"
                                      Style="{StaticResource ToolToggleButtonStyle}"
                                      Click="ToolButton_Click"
                                      Tag="Rectangle"/>
                        <ToggleButton x:Name="EllipseButton"
                                      Content="âšª ì›"
                                      Style="{StaticResource ToolToggleButtonStyle}"
                                      Click="ToolButton_Click"
                                      Tag="Ellipse"/>
                        <ToggleButton x:Name="TriangleButton"
                                      Content="ðŸ”º ì‚¼ê°í˜•"
                                      Style="{StaticResource ToolToggleButtonStyle}"
                                      Click="ToolButton_Click"
                                      Tag="Triangle"/>
                        <ToggleButton x:Name="TextButton"
                                      Content="ðŸ”¤ í…ìŠ¤íŠ¸"
                                      Style="{StaticResource ToolToggleButtonStyle}"
                                      Click="ToolButton_Click"
                                      Tag="Text"/>
                        <Button Content="ðŸ§¹ ì „ì²´ ì§€ìš°ê¸°"
                                Style="{StaticResource FlatButtonStyle}"
                                Margin="12,0,0,0"
                                Click="ClearAllAnnotations_Click"/>
                    </WrapPanel>
                </StackPanel>

                <!-- ì˜µì…˜ ê·¸ë£¹ -->
                <StackPanel Grid.Column="2"
                            HorizontalAlignment="Right">
                    <TextBlock Text="ì˜µì…˜"
                               Style="{StaticResource SectionLabelTextStyle}"
                               HorizontalAlignment="Right"/>
                    <StackPanel Orientation="Horizontal"
                                VerticalAlignment="Center">
                        <TextBlock Text="ìƒ‰ìƒ"
                                   Style="{StaticResource ToolbarLabelTextStyle}"/>
                        <ComboBox x:Name="ColorComboBox"
                                  Width="120"
                                  Margin="0,0,12,0"
                                  VerticalAlignment="Center"
                                  SelectionChanged="ColorComboBox_SelectionChanged">
                            <ComboBoxItem Content="ê²€ì •" Tag="Black" IsSelected="True"/>
                            <ComboBoxItem Content="ë¹¨ê°•" Tag="Red"/>
                            <ComboBoxItem Content="íŒŒëž‘" Tag="Blue"/>
                            <ComboBoxItem Content="ì´ˆë¡" Tag="Green"/>
                            <ComboBoxItem Content="ë…¸ëž‘" Tag="Yellow"/>
                            <ComboBoxItem Content="ì£¼í™©" Tag="Orange"/>
                            <ComboBoxItem Content="ë³´ë¼" Tag="Purple"/>
                        </ComboBox>
                        <TextBlock Text="ë‘ê»˜"
                                   Style="{StaticResource ToolbarLabelTextStyle}"
                                   Margin="0,0,6,0"/>
                        <Slider x:Name="ThicknessSlider"
                                Minimum="0.2"
                                Maximum="15"
                                Value="2"
                                Width="140"
                                TickFrequency="0.2"
                                IsSnapToTickEnabled="True"
                                VerticalAlignment="Center"
                                ValueChanged="ThicknessSlider_ValueChanged"/>
                        <TextBlock x:Name="ThicknessValueText"
                                   Text="2px"
                                   Style="{StaticResource StatusValueTextStyle}"
                                   Margin="8,0,0,0"/>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </Border>

        <Popup x:Name="TextMiniToolbar"
               StaysOpen="True"
               AllowsTransparency="True"
               Placement="Bottom"
               PopupAnimation="Slide"
               IsOpen="False">
            <Border Background="{StaticResource CardBackgroundBrush}"
                    BorderBrush="{StaticResource BorderBrushLight}"
                    BorderThickness="1"
                    CornerRadius="6"
                    Padding="8"
                    Effect="{StaticResource CardShadowEffect}">
                <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Center">
                    <Button x:Name="TextColorToolbarButton"
                            Content="ðŸŽ¨ ê¸€ìžìƒ‰"
                            Margin="0,0,8,0"
                            Padding="10,4"
                            Click="TextColorToolbarButton_Click">
                        <Button.ContextMenu>
                            <ContextMenu Placement="Bottom">
                                <MenuItem Header="ê²€ì •" Tag="Black" Click="TextColorMenuItem_Click"/>
                                <MenuItem Header="ë¹¨ê°•" Tag="Red" Click="TextColorMenuItem_Click"/>
                                <MenuItem Header="íŒŒëž‘" Tag="Blue" Click="TextColorMenuItem_Click"/>
                                <MenuItem Header="ì´ˆë¡" Tag="Green" Click="TextColorMenuItem_Click"/>
                                <MenuItem Header="ë…¸ëž‘" Tag="Goldenrod" Click="TextColorMenuItem_Click"/>
                                <MenuItem Header="ë³´ë¼" Tag="Purple" Click="TextColorMenuItem_Click"/>
                                <MenuItem Header="í•˜ì–‘" Tag="White" Click="TextColorMenuItem_Click"/>
                            </ContextMenu>
                        </Button.ContextMenu>
                    </Button>
                    <Button x:Name="TextFontIncreaseButton"
                            Content="Aï¼‹"
                            Margin="0,0,8,0"
                            Padding="10,4"
                            Width="60"
                            Click="TextFontIncreaseButton_Click"/>
                    <Button x:Name="TextFontDecreaseButton"
                            Content="Aï¼"
                            Padding="10,4"
                            Width="60"
                            Click="TextFontDecreaseButton_Click"/>
                </StackPanel>
            </Border>
        </Popup>

        <!-- PDF íŽ˜ì´ì§€ ì˜ì—­ -->
        <ScrollViewer x:Name="PdfScrollViewer"
                      Grid.Row="1"
                      Background="Transparent"
                      VerticalScrollBarVisibility="Auto"
                      HorizontalScrollBarVisibility="Auto">
            <Grid HorizontalAlignment="Center">
                <StackPanel x:Name="PagesPanel"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Top"
                            Margin="0,5,0,10">
                    <StackPanel.LayoutTransform>
                        <ScaleTransform x:Name="ZoomTransform"
                                        ScaleX="1"
                                        ScaleY="1"/>
                    </StackPanel.LayoutTransform>
                </StackPanel>
            </Grid>
        </ScrollViewer>

        <!-- í•˜ë‹¨ ìƒíƒœë°” -->
        <Border Grid.Row="2"
                Background="{StaticResource CardBackgroundBrush}"
                BorderBrush="{StaticResource BorderBrushLight}"
                BorderThickness="0,1,0,0"
                Padding="20,10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0"
                            Orientation="Horizontal"
                            VerticalAlignment="Center">
                    <Button Content="â—€ ì´ì „"
                            Style="{StaticResource FlatButtonStyle}"
                            Click="PrevPage_Click"/>
                    <Button Content="ë‹¤ìŒ â–¶"
                            Style="{StaticResource FlatButtonStyle}"
                            Margin="0,0,12,0"
                            Click="NextPage_Click"/>
                    <TextBlock Text="íŽ˜ì´ì§€"
                               Style="{StaticResource StatusLabelTextStyle}"/>
                    <TextBox x:Name="PageInput"
                             Width="64"
                             Margin="0,0,8,0"
                             VerticalAlignment="Center"/>
                    <Button Content="â†ª ì´ë™"
                            Style="{StaticResource FlatButtonStyle}"
                            Margin="0,0,12,0"
                            Click="GoToPage_Click"/>
                    <TextBlock x:Name="PageInfoText"
                               Style="{StaticResource StatusValueTextStyle}"/>
                </StackPanel>

                <StackPanel Grid.Column="2"
                            Orientation="Horizontal"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center">
                    <TextBlock Text="ì¤Œ"
                               Style="{StaticResource StatusLabelTextStyle}"/>
                    <Slider x:Name="ZoomSlider"
                            Minimum="50"
                            Maximum="300"
                            Value="100"
                            Width="160"
                            Margin="0,0,12,0"
                            VerticalAlignment="Center"
                            ValueChanged="ZoomSlider_ValueChanged"/>
                    <TextBox x:Name="ZoomTextBox"
                             Width="56"
                             Margin="0,0,6,0"
                             VerticalAlignment="Center"
                             HorizontalContentAlignment="Center"
                             Text="100"
                             KeyDown="ZoomTextBox_KeyDown"/>
                    <TextBlock Text="%"
                               Style="{StaticResource StatusValueTextStyle}"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
